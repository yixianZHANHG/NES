angular.module("myApp",["ionic","myApp.httpFactory","myApp.slideBox","myApp.tabs","myApp.news","myApp.live","myApp.topic","myApp.personal","myApp.my","myApp.newCon","ionic-datepicker"]).config(["$stateProvider","$urlRouterProvider","$ionicConfigProvider",function(e,n,t){t.views.transition("ios"),t.tabs.position("bottom"),t.navBar.alignTitle("center"),t.tabs.style("standard"),e.state("tabs",{url:"/tabs",abstract:!0,templateUrl:"tabs.html",controller:"tabsController"}),n.otherwise("tabs/news")}]),angular.module("myApp.live",[]).config(["$stateProvider",function(e){e.state("tabs.live",{url:"/live",views:{"tabs-live":{templateUrl:"live.html",controller:"liveController"}}})}]).controller("liveController",["$scope","$ionicSlideBoxDelegate","HttpFactory",function(e,n,t){e.news={adsArray1:[]};var o="http://data.live.126.net/livechannel/previewlist.json";t.getData(o).then(function(n){var t=[];if(n.top.length){for(var o=0;o<n.top.length;o++){var r={titile:n.top[o].roomName,imgsrc:n.top[o].image};t.push(r)}e.news.adsArray1=t}e.imas=n.future,e.itema=n.sublives,e.imad=n.live_review,e.imada=n.live_review[0].sourceinfo})}]),angular.module("myApp.my",[]).config(["$stateProvider",function(e){e.state("tabs.my",{url:"/my",views:{"tabs-personal":{templateUrl:"my.html",controller:"myController"}}})}]).controller("myController",["$scope",function(e){e.duSome=function(){console.log("jhhhhjeqwe")}}]),angular.module("myApp.newCon",[]).config(["$stateProvider",function(e){e.state("newCon",{url:"/newCon",templateUrl:"newCon.html",controller:"newConController",params:{data:null}})}]).controller("newConController",["$scope","$stateParams","$sce","HttpFactory",function(e,n,t,o){e.newCon={detail:"",body:""};var r=n.data;console.log(r);var s="http://c.m.163.com/nc/article/"+r+"/full.html";o.getData(s).then(function(n){e.newCon.detail=n[r],console.log(e.newCon.detail);var t=e.newCon.detail;if(t.img&&t.img.length)for(var o=0;o<t.img.length;o++){var s=t.img[o].pixel.split("*")[0];s>document.body.offsetWidth&&(s=document.body.offsetWidth);var i="width:"+s+"px",a="<img style='"+i+"' src="+t.img[o].src+">";t.body=t.body.replace(t.img[o].ref,a),console.log(t.body)}})}]),angular.module("myApp.news",[]).config(["$stateProvider",function(e){e.state("tabs.news",{url:"/news",views:{"tabs-news":{templateUrl:"news.html",controller:"newsController"}}})}]).controller("newsController",["$scope","$ionicPopup","$state","$ionicViewSwitcher","$ionicLoading","$ionicScrollDelegate","HttpFactory",function(e,n,t,o,r,s,i){var a="http://c.m.163.com/nc/topicset/ios/subscribe/manage/listspecial.html";i.getData(a).then(function(n){e.numArry=n.tList}),e.news={newsArray:"",adsArray:[]};var a="http://c.m.163.com/recommend/getSubDocPic?tid=T1348647909107&from=toutiao&offset=0&size=10&fn=1&prog=LMA1&passport=&devId=eW7qcXmjWleAjCxp25EgTBBywawDoVwZiZ9SMikG4cGiOa69wsn%2FdeHaaNGRMr2hIIGNeE0nI41SFrBIaL1THA%3D%3D&lat=DJEPdRawaRYCJZwF3SQobA%3D%3D&lon=7J7OmyytD8SqP0pSV1cJJA%3D%3D";i.getData(a).then(function(n){e.news.newsArray=n,e.news.adsArray=n.T1348647909107[0].ads}),e.items=[];var l=10;e.isShowInfinite=!0,e.loadMore=function(){l+=5;var n="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset="+l+"&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore";console.log(l),l<=40?i.getData(n).then(function(n){e.items=e.items.concat(n.tid),console.log(e.items),console.log(n.tid),e.$broadcast("scroll.infiniteScrollComplete")}):(e.isShowInfinite=!1,console.log("到底啦!!"))},e.items=[],e.doRefresh=function(){var n="http://c.m.163.com/recommend/getSubDocPic?from=toutiao&offset=0&size=10";i.getData(n).then(function(n){e.items=n.tid,e.isShowInfinite=!0,l=10}).finally(function(){e.$broadcast("scroll.refreshComplete")})},e.scrollMainToTop=function(){s.$getByHandle("mainScroll").scrollTop()},e.doSome=function(n){var r=e.items[n].docid;console.log(r),t.go("newCon",{data:r}),o.nextDirection("forward")}}]),angular.module("cftApp.news1",[]).controller("newsController1",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","HttpFactory","UrlArray",function(e,n,t,o,r,s){e.news={newsArray1:[],adsArray1:[],index:0},e.$on("updateNews1",function(n,t){e.news.adsArray1=[],e.news.newsArray1=[],e.news.index=0,console.log("view1,"+t),"清理"!=t&&e.loadMore1(s[t])}),e.loadMore1=function(n){var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/dlist/article/dynamic?from=T1348648517839&offset="+e.news.index+"&size=10&fn=7&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639275&sign=ENAtFozNgGugOq3e1UL6hWbkeBqF24b8ECZ%2FOg2OGlZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D",0===e.news.index?e.news.index+=11:e.news.index+=10,r.getData(t).then(function(n){return n?(e.news.adsArray1.length||n[0].ads&&(e.news.adsArray1=n[0].ads),e.news.newsArray1=e.news.newsArray1.concat(n),0===e.news.index&&e.news.newsArray1.splice(0,1),void e.$broadcast("scroll.infiniteScrollComplete")):void alert("没有更多数据!")})}}]),angular.module("cftApp.news2",[]).controller("newsController2",["$scope","$ionicPopup","$ionicSlideBoxDelegate","$state","HttpFactory","UrlArray",function(e,n,t,o,r,s){e.news={newsArray2:[],adsArray2:[],index:0},e.$on("updateNews2",function(n,t){e.news.adsArray2=[],e.news.newsArray2=[],e.news.index=0,console.log("view2,"+t),"清理"!=t&&e.loadMore2(s[t])}),e.loadMore2=function(n){var t="";n?(t=n,t=t.replace("@",e.news.index)):t="http://c.m.163.com/recommend/getChanListNews?channel=T1456112189138&size=10&offset="+e.news.index+"&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640855&sign=n%2BRpzwR4DEI0MaavyBhQlpZaxlFxQdWjn0Ty7qOYWaB48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D",0===e.news.index?e.news.index+=11:e.news.index+=10,r.getData(t).then(function(n){return n?(e.news.adsArray2.length||n[0].ads&&(e.news.adsArray2=n[0].ads),e.news.newsArray2=e.news.newsArray2.concat(n),0===e.news.index&&e.news.newsArray2.splice(0,1),void e.$broadcast("scroll.infiniteScrollComplete")):void alert("没有更多数据!")})}}]),angular.module("myApp.personal",["ionic-datepicker"]).config(["$stateProvider","ionicDatePickerProvider",function(e,n){e.state("tabs.personal",{url:"/personal",views:{"tabs-personal":{templateUrl:"personal.html",controller:"personalController"}}});var t={inputDate:new Date,titleLabel:"Select a Date",setLabel:"Set",todayLabel:"Today",closeLabel:"Close",mondayFirst:!1,weeksList:["S","M","T","W","T","F","S"],monthsList:["Jan","Feb","March","April","May","June","July","Aug","Sept","Oct","Nov","Dec"],templateType:"popup",from:new Date(2012,8,1),to:new Date(2018,8,1),showTodayButton:!0,dateFormat:"dd MMMM yyyy",closeOnSelect:!1,disableWeekdays:[]};n.configDatePicker(t)}]).controller("personalController",["$scope","ionicDatePicker","$ionicBackdrop","$timeout",function(e,n,t,o){var r={callback:function(e){console.log("Return value from the datepicker popup is : "+e,new Date(e))},disabledDates:[new Date("Wednesday, August 12, 2015"),new Date("08-16-2016"),new Date(1439676e6)]};e.openDatePicker=function(){n.openDatePicker(r)};var s=1;e.changColor=function(){s++,s%2==0?t.retain():t.release()}}]),angular.module("myApp.tabs",[]).controller("tabsController",["$scope",function(e){}]),angular.module("myApp.topic",[]).config(["$stateProvider",function(e){e.state("tabs.topic",{url:"/topic",views:{"tabs-topic":{templateUrl:"topic.html",controller:"topicController"}}})}]).controller("topicController",["$scope","$ionicLoading","HttpFactory",function(e,n,t){var o=0,r="http://c.m.163.com/newstopic/list/expert/5YyX5Lqs/0-"+o+".html";e.items=[],e.loadMore=function(){if(o<=20){o+=10;var n="http://c.m.163.com/newstopic/list/expert/5YyX5Lqs/0-"+o+".html";t.getData(n).then(function(n){console.log(n.data),e.items=n.data.expertList,e.$broadcast("scroll.infiniteScrollComplete")})}else o=0,console.log("到底啦!!")},e.doRefresh=function(){e.isShowInfinite=!0,t.getData(r).then(function(n){e.items=n.data.expertList}).finally(function(){e.$broadcast("scroll.refreshComplete")})}}]),angular.module("myApp.httpFactory",[]).factory("HttpFactory",["$http","$q",function(e,n){return{getData:function(t,o){if(t){var r=n.defer();return t="http://localhost:3000/?myUrl="+encodeURIComponent(t),o=o?o:"GET",e({url:t,method:o,timeout:2e4}).then(function(e){e=e.data,r.resolve(e)},function(e){r.reject(e)}),r.promise}}}}]),angular.module("myApp.slideBox",[]).directive("mgSlideBox",[function(){return{restrict:"E",scope:{sourceArray:"="},template:'<div class="topCarousel"><ion-slide-box delegate-handle="topCarouselSlideBox" on-slide-changed="slideHasChanged($index)" auto-play="true" slide-interval="1000" show-pager="true" does-continue="true" ng-if="isShowSlideBox" on-drag="drag($event)"> <ion-slide ng-repeat="ads in sourceArray track by $index" ng-click="goToDetailView($index)"><img ng-src="{{ads.imgsrc}}" class="topCarouselImg"></ion-slide> </ion-slide-box><div class="slideBottomDiv"></div></div>',controller:["$scope","$element","$ionicSlideBoxDelegate",function(e,n,t){e.goToDetailView=function(e){console.log("进入详情页"+e)};var o=n[0].lastElementChild;e.$watch("sourceArray",function(n,t){n&&n.length&&(e.isShowSlideBox=!0,o.innerText=e.sourceArray[0].title)}),e.slideHasChanged=function(e){},t.$getByHandle("mainSlideBox").enableSlide(!1),e.drag=function(e){t.$getByHandle("mainSlideBox").enableSlide(!1),e.stopPropagation()}}],replace:!0,link:function(e,n,t){}}}]),angular.module("cftApp.urls",[]).constant("UrlArray",["http://c.m.163.com/recommend/getSubDocPic?from=toutiao&prog=LMA1&open=&openpath=&fn=1&passport=&devId=%2BnrKMbpU9ZDPUOhb9gvookO3HKJkIOzrIg%2BI9FhrLRStCu%2B7ZneFbZ30i61TL9kY&offset=@&size=10&version=17.1&spever=false&net=wifi&lat=&lon=&ts=1480666192&sign=yseE2FNVWcJVjhvP48U1nPHyzZCKpBKh%2BaOhOE2d6GR48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=appstore","http://c.m.163.com/dlist/article/dynamic?from=T1348648517839&offset=@&size=10&fn=7&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639275&sign=ENAtFozNgGugOq3e1UL6hWbkeBqF24b8ECZ%2FOg2OGlZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1456112189138&size=10&offset=@&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640855&sign=n%2BRpzwR4DEI0MaavyBhQlpZaxlFxQdWjn0Ty7qOYWaB48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649079062&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639446&sign=cZqFpGcYxIM23Mk0zlBq8ziD1sRlb1GqZlwcRLb38aZ48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getSubDocPic?from=netease_h&size=10&offset=@&fn=4&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639599&sign=JIfO0JDD%2Bn9%2BAUDPwiCVNSwML5QPD%2BO1KSZcsmDfw2948ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/local/dynamic?from=6YOR5bee&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639679&sign=fibH0nYFS5ZqfhTkz%2Fctkn1b%2B%2B7UaCWuMhwPOm2XAxN48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1457068979049&size=10&offset=@&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639724&sign=uklrBnfDnFoSS86%2B44xw0tzktOhz8ek4D2b6Uh0bXk148ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348648756099&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639780&sign=PqlXEtC2KZaOX7vOO17uHuo4duhmWIxQqoQ4rBKRsQh48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649580692&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639824&sign=BENvYqDl9cYKiJh2irUV5%2Biue8PV%2FKHdFs3tQWGzBqd48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348650593803&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480639994&sign=L2rYDnEjMRXqgyoBwjDOU9%2FuAlHKEvkGbCcbOw0egKp48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/recommend/getChanListNews?channel=T1419316284722&size=10&offset=@&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640349&sign=kuB1wmMK3BIofo29zp1u%2FCelBxwQVclBPY2jLDS6PfV48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1473054348939&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640251&sign=TxI1npNtFDs5QSgpQr%2FOTwXPVB%2FvuqHD5Vj7E5Ul5t948ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348648141035&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640432&sign=LeTem6ZlcSys0TMWqSD%2FkavFP%2BW7CKnHNX3zs%2B6m3l548ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348654151579&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640614&sign=Ey6%2F0Qyd7pxjaaWUoZLQYriGwqX0xzmATqe6CpZ0C2x48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1414389941036&offset=@&size=10&fn=1&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480640649&sign=DXY4efOR3JOAgU6ePvFftxYD41PHsjGxZdWGM5quV0x48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D","http://c.m.163.com/dlist/article/dynamic?from=T1348649145984&offset=@&size=10&fn=2&passport=&devId=XTl7WnrkEuBfasUNdPC49g%3D%3D&lat=&lon=&version=17.2&net=wifi&ts=1480641094&sign=m32ovzEGXTpUeq0kQ%2BXNMNXg9B6bGu2D0vfF3xrFwjF48ErR02zJ6%2FKXOnxX046I&encryption=1&canal=oppo_store2014_news&mac=0qxu7nRwUAReuUxKr3NiFzDz%2FWJ7EEOtyLA2BsvQqp8%3D"]);